(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[505],{7433:function(e,s,t){"use strict";t.d(s,{D0:function(){return o},In:function(){return l},bG:function(){return d},Ai:function(){return u}});var r=t(7757),n=t.n(r),a=t(2137),i=t(9669),c=t.n(i),l=function(){var e=(0,a.Z)(n().mark((function e(s,t){var r;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c().get("https://testt222222.herokuapp.com/api/user/".concat(s,"/profile/").concat(t));case 2:if(!(r=e.sent)){e.next=7;break}return e.abrupt("return",r);case 7:return e.abrupt("return",{});case 8:case"end":return e.stop()}}),e)})));return function(s,t){return e.apply(this,arguments)}}(),o=function(){var e=(0,a.Z)(n().mark((function e(s){var t;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c().get("https://testt222222.herokuapp.com/api/user/".concat(s,"/accounts"));case 2:if(!(t=e.sent)){e.next=5;break}return e.abrupt("return",t);case 5:return e.abrupt("return",{});case 6:case"end":return e.stop()}}),e)})));return function(s){return e.apply(this,arguments)}}(),d=function(){var e=(0,a.Z)(n().mark((function e(s,t,r){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c().post("https://testt222222.herokuapp.com/api/webhook/".concat(s,"/send_message"),{recipientId:r,message:t});case 2:200!=e.sent.status&&console.log("Some error occured");case 4:case"end":return e.stop()}}),e)})));return function(s,t,r){return e.apply(this,arguments)}}(),u=function(){var e=(0,a.Z)(n().mark((function e(s){var t;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c().get("https://testt222222.herokuapp.com/api/user/".concat(s,"/me"));case 2:if(!(t=e.sent)){e.next=5;break}return e.abrupt("return",t);case 5:return e.abrupt("return",{});case 6:case"end":return e.stop()}}),e)})));return function(s){return e.apply(this,arguments)}}()},3170:function(e,s,t){"use strict";t.d(s,{zK:function(){return n},mA:function(){return a},yh:function(){return i},rc:function(){return c}});var r=t(2804),n=(0,r.cn)({key:"pageState",default:{}}),a=(0,r.cn)({key:"convState",default:[]}),i=(0,r.cn)({key:"activeConv",default:{}}),c=(0,r.cn)({key:"Profile",default:{}})},2452:function(e,s,t){"use strict";var r=t(5893),n=t(4699),a=t(6510),i=t(1472),c=t(1664),l=t(8633),o=t(1163);s.Z=function(e){var s=e.active,t=(0,l.kP)(),d=(0,n.Z)(t,2),u=d[0],m=d[1];return u||m||o.default.push("/"),(0,r.jsxs)("div",{className:"sidebar bg-primary bg-opacity-99 h-full fixed flex flex-col justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"logo p-5",children:(0,r.jsx)(a.Z,{className:"h-8 mx-auto",children:"Home"})}),(0,r.jsx)("div",{className:"menu",children:(0,r.jsx)("ul",{children:(0,r.jsx)(c.default,{href:"/dashboard/conversations",children:(0,r.jsx)("li",{className:"conv"==s?"bg-white py-3":"py-3",children:(0,r.jsx)(i.D$,{className:"h-8 mx-auto p-1",fill:"conv"==s?"black":"white"})})})})})]}),(0,r.jsxs)("div",{className:"icons-down",children:[(0,r.jsx)("div",{className:"signout text-center",children:(0,r.jsx)("button",{onClick:function(){return(0,l.w7)()},children:(0,r.jsx)(i.RD,{className:"h-8",fill:"#fff"})})}),(0,r.jsx)("div",{className:"user p-5",children:(0,r.jsx)(c.default,{href:"/profile",children:(0,r.jsx)("img",{src:"https://cdn.jetcommerce.io/wp-content/uploads/sites/11/2018/03/15145621/Richpanel-Icon-Blue.png",className:"h-10 rounded-full mx-auto",alt:"user"})})})]})]})}},1472:function(e,s,t){"use strict";t.d(s,{Ig:function(){return i},D$:function(){return a},m3:function(){return o},RD:function(){return l},hY:function(){return n},n5:function(){return c}});var r=t(5893);t(7294);var n=function(e){var s=e.className,t=e.fill;return(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:s,viewBox:"0 0 512 512",children:[(0,r.jsx)("title",{children:"ionicons-v5-b"}),(0,r.jsx)("path",{d:"M320,146s24.36-12-64-12A160,160,0,1,0,416,294",fill:t,stroke:"#000",strokeLinecap:"square",strokeMiterlimit:"10",strokeWidth:"40px"}),(0,r.jsx)("polyline",{points:"256 58 336 138 256 218",fill:t,stroke:"#000",strokeLinecap:"square",strokeMiterlimit:"10",strokeWidth:"40px"})]})};t(6510);var a=function(e){var s=e.className,t=e.fill;return(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:s,viewBox:"0 0 512 512",children:[(0,r.jsx)("title",{children:"ionicons-v5-q"}),(0,r.jsx)("path",{fill:t,d:"M456,48H56A24,24,0,0,0,32,72V360a24,24,0,0,0,24,24h72v80l117.74-80H456a24,24,0,0,0,24-24V72A24,24,0,0,0,456,48ZM160,248a32,32,0,1,1,32-32A32,32,0,0,1,160,248Zm96,0a32,32,0,1,1,32-32A32,32,0,0,1,256,248Zm96,0a32,32,0,1,1,32-32A32,32,0,0,1,352,248ZM456,80h0Z"})]})};var i=function(e){var s=e.className,t=e.fill;return(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:s,viewBox:"0 0 512 512",children:[(0,r.jsx)("title",{children:"ionicons-v5-g"}),(0,r.jsx)("path",{d:"M451,374c-15.88-16-54.34-39.35-73-48.76C353.7,313,351.7,312,332.6,326.19c-12.74,9.47-21.21,17.93-36.12,14.75s-47.31-21.11-75.68-49.39-47.34-61.62-50.53-76.48,5.41-23.23,14.79-36c13.22-18,12.22-21,.92-45.3-8.81-18.9-32.84-57-48.9-72.8C119.9,44,119.9,47,108.83,51.6A160.15,160.15,0,0,0,83,65.37C67,76,58.12,84.83,51.91,98.1s-9,44.38,23.07,102.64,54.57,88.05,101.14,134.49S258.5,406.64,310.85,436c64.76,36.27,89.6,29.2,102.91,23s22.18-15,32.83-31a159.09,159.09,0,0,0,13.8-25.8C465,391.17,468,391.17,451,374Z",fill:"none",stroke:t,strokeMiterlimit:"10",strokeWidth:"32px"})]})};var c=function(e){var s=e.className;return e.fill,(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:s,viewBox:"0 0 512 512",children:[(0,r.jsx)("title",{children:"ionicons-v5-j"}),(0,r.jsx)("path",{d:"M256,48C141.31,48,48,141.31,48,256s93.31,208,208,208,208-93.31,208-208S370.69,48,256,48ZM205.78,164.82C218.45,151.39,236.28,144,256,144s37.39,7.44,50.11,20.94C319,178.62,325.27,197,323.79,216.76,320.83,256,290.43,288,256,288s-64.89-32-67.79-71.25C186.74,196.83,193,178.39,205.78,164.82ZM256,432a175.49,175.49,0,0,1-126-53.22,122.91,122.91,0,0,1,35.14-33.44C190.63,329,222.89,320,256,320s65.37,9,90.83,25.34A122.87,122.87,0,0,1,382,378.78,175.45,175.45,0,0,1,256,432Z"})]})};var l=function(e){var s=e.className,t=e.fill,n=void 0===t?"none":t;return(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:s,viewBox:"0 0 512 512",children:[(0,r.jsx)("title",{children:"ionicons-v5-o"}),(0,r.jsx)("path",{d:"M304,336v40a40,40,0,0,1-40,40H104a40,40,0,0,1-40-40V136a40,40,0,0,1,40-40H256c22.09,0,48,17.91,48,40v40",fill:"none",stroke:n,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"40px"}),(0,r.jsx)("polyline",{points:"368 336 448 256 368 176",fill:"none",stroke:n,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"40px"}),(0,r.jsx)("line",{x1:"176",y1:"256",x2:"432",y2:"256",fill:"none",stroke:n,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"40px"})]})};var o=function(e){var s=e.className,t=e.fill;return(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:s,viewBox:"0 0 512 512",children:[(0,r.jsx)("title",{children:"ionicons-v5-o"}),(0,r.jsx)("path",{d:"M192,176V136a40,40,0,0,1,40-40H392a40,40,0,0,1,40,40V376a40,40,0,0,1-40,40H240c-22.09,0-48-17.91-48-40V336",fill:"none",stroke:t,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"40px"}),(0,r.jsx)("polyline",{points:"288 336 368 256 288 176",fill:"none",stroke:t,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"40px"}),(0,r.jsx)("line",{x1:"80",y1:"256",x2:"352",y2:"256",fill:"none",stroke:t,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"40px"})]})}},6510:function(e,s,t){"use strict";var r=t(5893);t(7294);s.Z=function(e){var s=e.className;return(0,r.jsx)("svg",{xmlns:"https://cdn.jetcommerce.io/wp-content/uploads/sites/11/2018/03/15145621/Richpanel-Icon-Blue.png",className:s,viewBox:"0 0 250 250",children:(0,r.jsxs)("g",{id:"Richpanel_Logo_Horizontal_Color",transform:"translate(-41 -108)",children:[(0,r.jsx)("path",{id:"Ellipse_1_copy_3","data-name":"Ellipse 1 copy 3",d:"M271.185,358H60.262A19.284,19.284,0,0,1,41,338.7v-211.4A19.284,19.284,0,0,1,60.262,108H271.185a19.284,19.284,0,0,1,19.263,19.305V338.7A19.284,19.284,0,0,1,271.185,358Z",fill:"#fff",fillRule:"evenodd"}),(0,r.jsx)("path",{id:"Ellipse_6_copy_3","data-name":"Ellipse 6 copy 3",d:"M193.9,167.689a7.708,7.708,0,0,1-15,2.439,14.056,14.056,0,1,0-12.439,20.521,13.909,13.909,0,0,0,7.42-2.148,7.72,7.72,0,0,1,1.4-.991q.254-.2.5-.417l.063.142a7.654,7.654,0,1,1,6.221,13.986l.074.167a29.583,29.583,0,0,1-41.084-9.913,57.142,57.142,0,0,0-31.884,44.9s-1.372,7.62-9.347,7.62a8.931,8.931,0,0,1-8.971-8.89c0-1.431.373-6.843.98-8.041,4.077-25.987,21.611-44.366,45.329-53.512a29.525,29.525,0,0,1,56.074-9.051l-.028.021a7.56,7.56,0,0,1,.692,3.167Zm22.914,135.045a7.728,7.728,0,0,1,5.392-14.239,14.073,14.073,0,1,0-13.368-13.542A7.676,7.676,0,0,1,209,276.66c.033.214.07.428.112.64l-.154-.016a7.747,7.747,0,0,1-1,3.092,7.618,7.618,0,0,1-14.2-4.686l-.182-.019a29.668,29.668,0,0,1,29.108-30.7,57.2,57.2,0,0,0-22.854-50.122s-5.9-5-1.911-11.923a8.911,8.911,0,0,1,12.168-3.341c1.237.716,5.726,3.745,6.458,4.87,20.417,16.532,27.532,40.941,23.577,66.1A29.609,29.609,0,0,1,219.9,303.749v-.035a7.517,7.517,0,0,1-3.092-.98ZM87.42,255.548a7.722,7.722,0,0,1,9.608,11.8,14.157,14.157,0,0,0-.193,14.507,13.948,13.948,0,1,0,18.578-19.338,7.714,7.714,0,0,1-1.554-.715c-.2-.079-.4-.154-.609-.223l.091-.126a7.731,7.731,0,0,1,.582-12.919,7.616,7.616,0,0,1,8.393.527l.107-.149A29.716,29.716,0,0,1,134.4,289.527a56.916,56.916,0,0,0,54.738,5.225s7.271-2.619,11.258,4.3a8.952,8.952,0,0,1-3.2,12.232c-1.236.715-6.1,3.1-7.437,3.17-24.494,9.455-49.144,3.426-68.906-12.587A29.586,29.586,0,0,1,85,257.726l.032.015a7.533,7.533,0,0,1,2.388-2.193Z",fill:"#0e5394",fillRule:"evenodd"})]})})}},6505:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return D}});var r=t(5893),n=t(7757),a=t.n(n),i=t(2137),c=t(4699),l=t(7294),o=t(2452),d=t(1472),u=t(3170),m=t(2804);var f=function(e){var s=e.className,t=(0,m.sJ)(u.mA),n=(0,m.FV)(u.yh),a=(0,c.Z)(n,2),i=(a[0],a[1]);return(0,r.jsxs)("div",{className:s+" w-full  h-screen",children:[(0,r.jsxs)("div",{className:"bar flex justify-between items-center border-gray-300 border-b-1 py-5 px-4",children:[(0,r.jsx)("span",{className:"font-semibold text-xl",children:"Chats"}),(0,r.jsx)(d.hY,{className:"h-6",fill:"none"})]}),t.length?(0,r.jsx)("div",{className:"list",children:(0,r.jsx)("ul",{children:t.map((function(e,s){return(0,r.jsx)("li",{onClick:function(){console.log(e.sender_id),i((function(s){return e}))},children:(0,r.jsx)("div",{className:"h-auto p-4 border-1 border-solid border-gray-200",children:(0,r.jsxs)("div",{className:"head grid grid-cols-10 items-center mb-2",children:[(0,r.jsx)("input",{type:"checkbox",className:"col-span-1",name:"",id:""}),(0,r.jsxs)("div",{className:"name-type col-span-8 text-left",children:[(0,r.jsx)("div",{className:"name font-semibold",children:e.user.first_name+" "+e.user.last_name}),(0,r.jsx)("div",{className:"type font-medium",children:"Facebook DM"})]}),(0,r.jsx)("div",{className:"elapse col-span-1",children:"10m"})]})})},s)}))})}):(0,r.jsx)("div",{className:"w-full py-10 text-center",children:"No pending chats"})]})},x=t(6156),p=t(7433),h=t(381),j=t.n(h);var v=function(e){var s=e.className,t=(0,m.sJ)(u.yh);return(0,r.jsxs)("div",{className:s+" bg-gray-200 bg-opacity-60",children:[(0,r.jsxs)("div",{className:"profile p-10 w-full text-center flex flex-col space-y-5 bg-white",children:[(0,r.jsx)("div",{className:"image flex justify-center",children:(0,r.jsx)("img",{src:t.user.profile_pic,alt:"senderimage",className:"rounded-full h-20"})}),(0,r.jsxs)("div",{className:"name-status",children:[(0,r.jsx)("div",{className:"name text-2xl font-semibold",children:t.user.first_name+" "+t.user.last_name}),(0,r.jsxs)("div",{className:"status text-gray-400 font-semibold flex justify-center items-center space-x-2",children:[(0,r.jsx)("div",{className:"badge bg-gray-400 w-2 h-2 rounded-full"})," ",(0,r.jsx)("div",{children:"Offline"})]})]}),(0,r.jsxs)("div",{className:"buttons flex space-x-2 justify-center",children:[(0,r.jsxs)("button",{className:"call-button flex space-x-1 px-4 py-2 font-bold text-gray-600 border-1 border-solid border-gray-600 rounded-md",children:[(0,r.jsx)(d.Ig,{fill:"#000",className:"h-6"}),(0,r.jsx)("div",{className:"txt",children:"Call"})]}),(0,r.jsxs)("button",{className:"profile-button flex space-x-1 px-4 py-2 font-bold text-gray-600 border-1 border-solid border-gray-600 rounded-md",children:[(0,r.jsx)(d.n5,{className:"h-6"}),(0,r.jsx)("div",{className:"txt",children:"Profile"})]})]})]}),(0,r.jsx)("div",{className:"cards p-2",children:(0,r.jsxs)("div",{className:"info-card bg-white rounded-md p-4",children:[(0,r.jsx)("div",{className:"title font-semibold text-xl",children:"Customer details"}),(0,r.jsx)("div",{className:"table w-full",children:(0,r.jsx)("table",{className:"w-full",children:(0,r.jsxs)("tbody",{children:[(0,r.jsxs)("tr",{className:"grid grid-cols-10 py-2",children:[(0,r.jsx)("td",{className:"col-span-5 text-gray-400 font-semibold",children:"Email"}),(0,r.jsx)("td",{className:"col-span-5 text-right font-medium text-gray-900",children:"example@gmail.com"})]}),(0,r.jsxs)("tr",{className:"grid grid-cols-10 py-2",children:[(0,r.jsx)("td",{className:"col-span-5 text-gray-400 font-semibold",children:"First Name"}),(0,r.jsx)("td",{className:"col-span-5 text-right font-medium text-gray-900",children:t.user.first_name})]}),(0,r.jsxs)("tr",{className:"grid grid-cols-10 py-2",children:[(0,r.jsx)("td",{className:"col-span-5 text-gray-400 font-semibold",children:"Last Name"}),(0,r.jsx)("td",{className:"col-span-5 text-right font-medium text-gray-900",children:t.user.last_name})]})]})})}),(0,r.jsx)("div",{className:"view-details mt-3",children:(0,r.jsx)("button",{className:"font-semibold text-lg text-primary",children:"View more details"})})]})})]})},g=t(8633),b=t(7329);function y(e,s){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);s&&(r=r.filter((function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable}))),t.push.apply(t,r)}return t}function N(e){for(var s=1;s<arguments.length;s++){var t=null!=arguments[s]?arguments[s]:{};s%2?y(Object(t),!0).forEach((function(s){(0,x.Z)(e,s,t[s])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):y(Object(t)).forEach((function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))}))}return e}var w=function(e,s,t){var r=s.sender.id;console.log(t);var n=e.filter((function(e){return e.sender_id===r})),a=e.filter((function(e){return e.sender_id!==r}));if(n.length){var i=n[0];return[n=N(N({},i),{},{messages:[].concat((0,b.Z)(i.messages),[{msg:s.message.text,type:"received",time:new Date(s.timestamp).toISOString()}])})].concat((0,b.Z)(a))}return[n={sender_id:r,user:t,messages:[{msg:s.message.text,type:"received",time:new Date(s.timestamp).toISOString()}]}].concat((0,b.Z)(a))},k=function(e,s,t){var r=e.filter((function(e){return e.sender_id==t})),n=e.filter((function(e){return e.sender_id!=t})),a=r[0];return[r=N(N({},a),{},{messages:[].concat((0,b.Z)(a.messages),[{msg:s,type:"sent",time:(new Date).toISOString()}])})].concat((0,b.Z)(n))};function Z(e,s){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);s&&(r=r.filter((function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable}))),t.push.apply(t,r)}return t}var O=function(e){var s=e.msg,t=e.sender;return(0,r.jsx)("li",{className:"left w-1/2 self-start flex items-center space-x-3",children:(0,r.jsxs)("div",{className:"msg w-full flex flex-col space-y-2",children:[(0,r.jsxs)("div",{className:"grid grid-cols-11 items-end  justify-end",children:[(0,r.jsx)("div",{className:"sender-img col-span-2 flex justify-start",children:(0,r.jsx)("img",{src:t.profile_pic,alt:"sender-img",className:"rounded-full h-9"})}),(0,r.jsx)("div",{className:" col-span-9 flex justify-start",children:(0,r.jsx)("span",{className:"bg-white text  p-4 rounded-lg shadow-md w-max",children:s.msg})})]}),(0,r.jsxs)("div",{className:"date-time text-sm text-left",children:[(0,r.jsx)("span",{className:"font-semibold",children:t.first_name})," -"," ",j()(s.time).format("MMM D, h.mm a")]})]})})},_=function(e){var s=e.msg,t=e.sender;return(0,r.jsx)("li",{className:"right w-1/2 self-end flex items-center space-x-3",children:(0,r.jsxs)("div",{className:"msg w-full flex flex-col space-y-2",children:[(0,r.jsxs)("div",{className:"grid grid-cols-11 items-end space-x-2 justify-end",children:[(0,r.jsx)("div",{className:" col-span-9 flex justify-end",children:(0,r.jsx)("span",{className:"bg-white text  p-4 rounded-lg shadow-md w-max",children:s.msg})}),(0,r.jsx)("div",{className:"sender-img col-span-2 flex justify-end",children:(0,r.jsx)("img",{src:t.image,alt:"sender-img",className:"rounded-full h-9"})})]}),(0,r.jsxs)("div",{className:"date-time text-sm text-right",children:[(0,r.jsx)("span",{className:"font-semibold",children:t.name})," -"," ",j()(s.time).format("MMM D, h.mm a")]})]})})};var M=function(e){var s,t=e.className,n=(0,g.kP)(),o=(0,c.Z)(n,2),d=o[0],f=(o[1],(0,m.FV)(u.mA)),h=(0,c.Z)(f,2),j=h[0],b=h[1],y=(0,m.FV)(u.yh),N=(0,c.Z)(y,2),w=N[0],M=N[1],A=(0,m.sJ)(u.rc),D=l.useState(""),P=(0,c.Z)(D,2),S=P[0],C=(P[1],l.useRef());l.useEffect((function(){M((function(e){return function(e){for(var s=1;s<arguments.length;s++){var t=null!=arguments[s]?arguments[s]:{};s%2?Z(Object(t),!0).forEach((function(s){(0,x.Z)(e,s,t[s])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Z(Object(t)).forEach((function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))}))}return e}({},j.filter((function(s){return s.sender_id===e.sender_id})).pop())}))}),[j]);var L=function(){var e=(0,i.Z)(a().mark((function e(s,t,r){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,p.bG)(s,t,r);case 2:b((function(e){return k(e,t,r)}));case 3:case"end":return e.stop()}}),e)})));return function(s,t,r){return e.apply(this,arguments)}}();return(0,r.jsxs)(l.Fragment,{children:[(0,r.jsx)("div",{className:t+" h-screen bg-red-50 bg-opacity-70 relative",children:Object.keys(w).length>0&&(0,r.jsxs)(l.Fragment,{children:[(0,r.jsx)("div",{className:"title text-2xl font-semibold border-1 bg-white border-gray-200 py-4 px-6",children:w.user.first_name+" "+w.user.last_name}),(0,r.jsxs)("div",{className:"chats w-full h-full",children:[(0,r.jsx)("ul",{className:"w-auto flex flex-col p-4 h-5/6 overflow-auto",children:null===w||void 0===w||null===(s=w.messages)||void 0===s?void 0:s.map((function(e,s){return"received"===e.type?(0,r.jsx)(O,{msg:e,sender:w.user},s):(0,r.jsx)(_,{msg:e,sender:A},s)}))}),(0,r.jsx)("form",{onSubmit:function(e){e.preventDefault(),L(d.user.email,e.target[0].value,w.sender_id),C.current.reset()},ref:C,children:(0,r.jsxs)("div",{className:"input w-full absolute bottom-3 px-3 flex space-x-2",children:[(0,r.jsx)("input",{type:"text",className:"w-full border-1 p-3",placeholder:"Enter Message",onSubmit:function(e){return e.target.value=""}}),(0,r.jsx)("button",{type:"submit",defaultValue:S,value:S,className:"border-1 border-solid border-gray-600 rounded-lg px-2 hidden",children:"Submit"})]})})]})]})}),Object.keys(w).length>0?(0,r.jsx)(v,{className:"col-span-3"}):(0,r.jsx)("div",{className:"bg-red-50 bg-opacity-70 col-span-3"})]})},A=t(5615),D=function(){var e,s=(0,g.kP)(),t=(0,c.Z)(s,2),n=t[0],d=(t[1],(0,m.FV)(u.zK)),x=(0,c.Z)(d,2),h=x[0],j=x[1],v=(0,m.FV)(u.mA),b=(0,c.Z)(v,2),y=(b[0],b[1]),N=((0,m.sJ)(u.yh),(0,m.FV)(u.rc)),k=(0,c.Z)(N,2),Z=(k[0],k[1]);l.useEffect((0,i.Z)(a().mark((function e(){var s,t,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=10;break}return e.next=3,(0,p.D0)(n.user.email);case 3:return s=e.sent,j(s.data.data.accounts[0]),e.next=7,(0,p.Ai)(n.user.email);case 7:t=e.sent,r=t.data.data.user,Z((function(e){return r}));case 10:case"end":return e.stop()}}),e)}))),[n]),l.useEffect((0,i.Z)(a().mark((function s(){return a().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:h&&n&&Object.keys(h).length&&(e=(0,A.io)("localhost:8000"),O());case 1:case"end":return s.stop()}}),s)}))),[n,h]);var O=function(){e.on("connect",(function(){e.emit("/init",{pageId:h.id})})),e.on("connect_error",(function(e){console.error(e)}));var s=function(){var e=(0,i.Z)(a().mark((function e(s){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,p.In)(n.user.email,s.event.sender.id);case 2:t=e.sent,y((function(e){return w(e,s.event,t.data.data.details)}));case 4:case"end":return e.stop()}}),e)})));return function(s){return e.apply(this,arguments)}}();e.on("/new_message",s)};return(0,r.jsxs)("div",{className:"",children:[(0,r.jsx)(o.Z,{active:"conv"}),(0,r.jsxs)("div",{className:"ml-20 grid grid-cols-10",children:[(0,r.jsx)(f,{className:"border-r-1 border-gray-300 border-solid col-span-2"}),(0,r.jsx)(M,{className:"col-span-5"})]})]})}}}]);